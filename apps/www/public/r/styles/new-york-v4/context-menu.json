{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "context-menu",
  "type": "registry:ui",
  "dependencies": [
    "react-aria-components"
  ],
  "registryDependencies": [
    "list-box",
    "popover"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/ui/context-menu.tsx",
      "content": "\"use client\"\n\nimport React from \"react\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\nimport {\n  Menu as AriaMenu,\n  MenuItem as AriaMenuItem,\n  MenuProps as AriaMenuProps,\n  MenuSection as AriaMenuSection,\n  MenuSectionProps as AriaMenuSectionProps,\n  SubmenuTrigger as AriaSubmenuTrigger,\n  Collection,\n  composeRenderProps,\n  DialogTrigger,\n  Header,\n  MenuItemProps,\n  Separator,\n  SeparatorProps,\n} from \"react-aria-components\"\n\nimport { cn } from \"../lib/utils\"\nimport { dropdownItemStyles } from \"./list-box\"\nimport { Popover } from \"./popover\"\n\ninterface ContextMenuProps {\n  children: React.ReactNode\n}\n\nexport function ContextMenu({ children }: ContextMenuProps) {\n  const [isOpen, setIsOpen] = React.useState(false)\n  const [position, setPosition] = React.useState({ x: 0, y: 0 })\n\n  const handleContextMenu = (e: React.MouseEvent) => {\n    e.preventDefault()\n    setPosition({ x: e.clientX, y: e.clientY })\n    setIsOpen(true)\n  }\n\n  return (\n    <DialogTrigger isOpen={isOpen} onOpenChange={setIsOpen}>\n      <div onContextMenu={handleContextMenu} data-slot=\"context-menu-trigger\">\n        {children}\n      </div>\n      <div\n        style={{\n          position: \"fixed\",\n          left: position.x,\n          top: position.y,\n          width: 0,\n          height: 0,\n        }}\n      />\n    </DialogTrigger>\n  )\n}\n\nexport function ContextMenuTrigger({\n  className,\n  children,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div className={className} {...props}>\n      {children}\n    </div>\n  )\n}\n\ninterface ContextMenuContentProps<T> extends AriaMenuProps<T> {\n  className?: string\n}\n\nexport function ContextMenuContent<T extends object>({\n  className,\n  ...props\n}: ContextMenuContentProps<T>) {\n  return (\n    <Popover placement=\"bottom start\" className={cn(\"w-56\", className)}>\n      <AriaMenu\n        {...props}\n        className=\"max-h-[inherit] overflow-auto rounded-[inherit] p-1 outline-0\"\n      />\n    </Popover>\n  )\n}\n\ninterface ContextMenuItemProps extends MenuItemProps {\n  inset?: boolean\n  variant?: \"default\" | \"destructive\"\n}\n\nexport function ContextMenuItem({\n  className,\n  inset,\n  variant = \"default\",\n  ...props\n}: ContextMenuItemProps) {\n  const textValue =\n    props.textValue ||\n    (typeof props.children === \"string\" ? props.children : undefined)\n  return (\n    <AriaMenuItem\n      textValue={textValue}\n      {...props}\n      data-inset={inset}\n      data-variant={variant}\n      className={composeRenderProps(className, (className) =>\n        cn(\n          dropdownItemStyles,\n          \"data-[inset]:pl-8\",\n          \"data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive\",\n          className\n        )\n      )}\n    >\n      {composeRenderProps(\n        props.children,\n        (children, { selectionMode, isSelected, hasSubmenu }) => (\n          <>\n            {selectionMode !== \"none\" && (\n              <span className=\"flex w-4 items-center\">\n                {isSelected && <Check aria-hidden className=\"h-4 w-4\" />}\n              </span>\n            )}\n            <span className=\"group-selected:font-semibold flex flex-1 items-center gap-2 truncate font-normal\">\n              {children}\n            </span>\n            {hasSubmenu && (\n              <ChevronRight aria-hidden className=\"absolute right-2 h-4 w-4\" />\n            )}\n          </>\n        )\n      )}\n    </AriaMenuItem>\n  )\n}\n\ninterface ContextMenuCheckboxItemProps extends MenuItemProps {\n  children: React.ReactNode\n}\n\nexport function ContextMenuCheckboxItem({\n  className,\n  ...props\n}: ContextMenuCheckboxItemProps) {\n  const textValue =\n    props.textValue ||\n    (typeof props.children === \"string\" ? props.children : undefined)\n  return (\n    <AriaMenuItem\n      textValue={textValue}\n      {...props}\n      className={composeRenderProps(className, (className) =>\n        cn(dropdownItemStyles, \"pl-8\", className)\n      )}\n    >\n      {composeRenderProps(props.children, (children, { isSelected }) => (\n        <>\n          <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n            {isSelected && <Check aria-hidden className=\"h-4 w-4\" />}\n          </span>\n          <span className=\"group-selected:font-semibold flex flex-1 items-center gap-2 truncate font-normal\">\n            {children}\n          </span>\n        </>\n      ))}\n    </AriaMenuItem>\n  )\n}\n\ninterface ContextMenuRadioItemProps extends MenuItemProps {\n  children: React.ReactNode\n}\n\nexport function ContextMenuRadioItem({\n  className,\n  ...props\n}: ContextMenuRadioItemProps) {\n  const textValue =\n    props.textValue ||\n    (typeof props.children === \"string\" ? props.children : undefined)\n  return (\n    <AriaMenuItem\n      textValue={textValue}\n      {...props}\n      className={composeRenderProps(className, (className) =>\n        cn(dropdownItemStyles, \"pl-8\", className)\n      )}\n    >\n      {composeRenderProps(props.children, (children, { isSelected }) => (\n        <>\n          <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n            {isSelected && (\n              <Circle aria-hidden className=\"size-2 fill-current\" />\n            )}\n          </span>\n          <span className=\"group-selected:font-semibold flex flex-1 items-center gap-2 truncate font-normal\">\n            {children}\n          </span>\n        </>\n      ))}\n    </AriaMenuItem>\n  )\n}\n\nexport function ContextMenuSeparator(props: SeparatorProps) {\n  return <Separator {...props} className=\"bg-border -mx-1 my-1 h-px\" />\n}\n\nexport interface ContextMenuSectionProps<T> extends AriaMenuSectionProps<T> {\n  title?: string\n  items?: Iterable<T>\n}\n\nexport function ContextMenuSection<T extends object>(\n  props: ContextMenuSectionProps<T>\n) {\n  return (\n    <AriaMenuSection {...props}>\n      {props.title && (\n        <Header className=\"text-foreground px-2 py-1.5 text-sm font-medium\">\n          {props.title}\n        </Header>\n      )}\n      <Collection items={props.items}>{props.children}</Collection>\n    </AriaMenuSection>\n  )\n}\n\ninterface ContextMenuLabelProps extends React.ComponentProps<typeof Header> {\n  inset?: boolean\n}\n\nexport function ContextMenuLabel({\n  className,\n  inset,\n  ...props\n}: ContextMenuLabelProps) {\n  return (\n    <Header\n      {...props}\n      data-inset={inset}\n      className={cn(\n        \"text-foreground px-2 py-1.5 text-sm font-medium data-[inset]:pl-8\",\n        className\n      )}\n    />\n  )\n}\n\nexport function ContextMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      {...props}\n      className={cn(\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\n        className\n      )}\n    />\n  )\n}\n\n// Submenu support\ninterface ContextMenuSubProps {\n  children: [React.ReactElement, React.ReactElement]\n}\n\nexport function ContextMenuSub({ children }: ContextMenuSubProps) {\n  return <AriaSubmenuTrigger>{children}</AriaSubmenuTrigger>\n}\n\ninterface ContextMenuSubTriggerProps extends ContextMenuItemProps {\n  children: React.ReactNode\n}\n\nexport function ContextMenuSubTrigger({\n  children,\n  inset,\n  className,\n  ...props\n}: ContextMenuSubTriggerProps) {\n  return (\n    <AriaMenuItem\n      {...props}\n      data-inset={inset}\n      className={composeRenderProps(className, (className) =>\n        cn(dropdownItemStyles, \"data-[inset]:pl-8\", className)\n      )}\n    >\n      <span className=\"flex flex-1 items-center gap-2\">{children}</span>\n      <ChevronRight aria-hidden className=\"ml-auto h-4 w-4\" />\n    </AriaMenuItem>\n  )\n}\n\ninterface ContextMenuSubContentProps<T> extends AriaMenuProps<T> {\n  className?: string\n}\n\nexport function ContextMenuSubContent<T extends object>({\n  className,\n  ...props\n}: ContextMenuSubContentProps<T>) {\n  return (\n    <Popover placement=\"right top\" className={cn(\"w-44\", className)}>\n      <AriaMenu\n        {...props}\n        className=\"max-h-[inherit] overflow-auto rounded-[inherit] p-1 outline-0\"\n      />\n    </Popover>\n  )\n}\n\n// RadioGroup support\ninterface ContextMenuRadioGroupProps<T> extends AriaMenuProps<T> {\n  value?: string\n  onValueChange?: (value: string) => void\n  children: React.ReactNode\n}\n\nexport function ContextMenuRadioGroup<T extends object>({\n  value,\n  onValueChange,\n  children,\n  ...props\n}: ContextMenuRadioGroupProps<T>) {\n  return (\n    <AriaMenu\n      {...props}\n      selectionMode=\"single\"\n      selectedKeys={value ? [value] : []}\n      onSelectionChange={(keys) => {\n        const selected = Array.from(keys)[0]\n        if (selected && onValueChange) {\n          onValueChange(selected.toString())\n        }\n      }}\n    >\n      {children}\n    </AriaMenu>\n  )\n}\n\n// Aliases for compatibility\nexport const ContextMenuGroup = ContextMenuSection\nexport const ContextMenuPortal = React.Fragment\n",
      "type": "registry:ui"
    }
  ]
}